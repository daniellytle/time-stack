function removeHash(){var a,b,c=window.location;"replaceState"in history?history.replaceState("",document.title,c.pathname+c.search):(a=document.body.scrollTop,b=document.body.scrollLeft,c.hash="",document.body.scrollTop=a,document.body.scrollLeft=b)}console.log("app.js"),("#_=_"==location.hash||"#_=_"==location.href.slice(-1))&&removeHash();var date,picker=new Pikaday({field:document.getElementById("dateHolder"),minDate:new Date,yearRange:[(new Date).getFullYear(),2020],onSelect:function(){date=this.getMoment(),$("#datepicker").css({background:"none"}),$("#datepicker").text(this.getMoment().format("MMM DD"))}});data.todos.sort(function(a,b){return a.dueDate<b.dueDate});for(var i=data.todos.length-1;i>=0;i--){var create=moment(data.todos[i].createDate),due=moment(data.todos[i].dueDate),today=moment(),diff=due.diff(create,"days"),task=$("<div class='tOut'><div class='todo'>"+data.todos[i].name+"</div><div class='status'>"+diff+"d</div></div>");console.log(diff),task.addClass(2>diff?"urgent":4>diff?"mild":"fine"),task.appendTo(".todos").fadeIn("slow")}$("body").keydown(function(a){13==a.keyCode&&$("#goButton").click()}),$("#goButton").click(function(){if(""==$("#task").val())return void $(".newTop").addClass("empty");if(void 0==date)return void $("#dateHolder").addClass("empty");var a=moment(),b=date;console.log(a),console.log(b);var c=b.diff(a,"days");console.log(c);var d=$("<div class='tOut'><div class='maybe todo'>"+$("#task").val()+"</div><div class='status'>"+c+"d</div></div>");d.addClass(2>c?"urgent":4>c?"mild":"fine"),d.appendTo(".todos").fadeIn("slow");var e={name:$("#task").val(),dueDate:b._d,createDate:moment()._d};$.post("/api",{Fbid:data.facebookId,todo:e},function(a,b){console.log(b?b:a),e._id=a,data.todos.push(e),d.children().removeClass("maybe")})}),$(".newTop").click(function(){$("#task").focus()}),$(document).on("click",".tOut",function(){console.log("got delete");var a=0;for(a=data.todos.length-1;a>=0&&data.todos[a].name!=$(this).children(".todo").text();a--);var b=data.todos[a]._id,c=data.facebookId,d=$(this);$.ajax({url:"/api?"+$.param({Id:b,FbId:c}),type:"DELETE",success:function(){console.log("good"),d.fadeOut(200)},error:function(){d.addClass("maybe")}})});